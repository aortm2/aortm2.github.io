<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
<meta name="format-detection" content="telephone=no, address=no, email=no" />
<title>RTSEDU LMS</title>
<link rel="stylesheet" type="text/css" href="../../font/material-icons.css" />
<link rel="stylesheet" type="text/css" href="../../font/GmarketSans.css" />
<link rel="stylesheet" type="text/css" href="../../css/www/common.css" />
<script type="text/javascript" src="../../js/jquery/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../js/jquery/jquery-ui.min.js"></script>
<link rel="stylesheet" href="../../js/jquery/jquery-ui.min.css" type="text/css"/>
<script type="text/javascript" src="../../js/www/slick.min.js"></script>
<script type="text/javascript" src="../../js/www/design.js"></script>
<!-- kendo -->
<!-- <link rel="stylesheet" href="../../../js/3rdparty/kendoui/styles/kendo.common.min.css" type="text/css"/>
<link rel="stylesheet" href="../../../js/3rdparty/kendoui/styles/kendo.bootstrap.min.css" type="text/css"/>
<script type="text/javascript" src="../../../js/3rdparty/kendoui/js/kendo.all.min.js"></script> -->
<!-- //kendo -->
<!-- chart.js -->
<script type="text/javascript" src="../../js/www/Chart.min.js"></script>
<!-- //chart.js -->
<script>
jQuery(function($){

	// if(window.getSelection().getRangeAt(0).commonAncestorContainer.nodeName == "P")
    // window.getSelection().getRangeAt(0).surroundContents(element);
    // else { //this case when i select from top to bottom with the button
    // window.getSelection().getRangeAt(0).commonAncestorContainer.querySelector("#higlight-this").querySelector("p").getRangeAt(0).surroundContents(element);
    // }

	// var idx = 0
	// $(".b_annotate").on('click',function(){
	// 	$('.highlight').show();
	// 	idx++
	// 	$(".sat_con .sc").append("<input id='selText"+idx+"' type='hidden'>");
	// 	document.getElementById("selText"+idx+"").value = selectText();
	// 	document.getElementById("seltxt").innerHTML = selectText();
	// 	var search = $('#selText'+idx+'').val();
	// 	$("#str:contains('"+search+"')").each(function () {
	// 		var regex = new RegExp(search,'gi');
	// 		$(this).html( $(this).html().replace(regex, "<div class='lig lig"+idx+"'>"+search+"<div class='tooltip'>tip</div></div>") );
	// 	});
	// });
	
	//230726 스크립트 수정
	var idx = 0;
	$('.b_annotate').on("click", function(e){
		idx++;
		selected = getSelection();
		if (selected && selected.rangeCount > 0) {
			range = selected.getRangeAt(0)
		}else{
			range = selected
		}
		newNode = document.createElement("mark");
		newNode.setAttribute("class", "lig");
		newNode.setAttribute("id", "selText_"+idx+"");

		if(range == 0){
			var nBox = "<div class='n_box'>"
			nBox += "<span>MAKE A SELECTION FIRST</span>"
			nBox += "<p>Select some text, then press annotate</p>"
			nBox += "</div>"
			if($(".n_box").length > 0){
				$(".n_box").remove();
			} else{
				$(this).append(nBox)
			}
		}else{
			range.surroundContents(newNode);
			if(range.startContainer === range.endContainer){
				$('.highlight').show().find('textarea').focus();
				document.getElementById("seltxt").innerHTML = range;
				$(newNode).append("<div class='tooltip'>tip</div>");
			} else{
				// var dpc = "<div class='c_confirm'><div class='con' style='max-width: 400px;'>"
				// dpc += "<div class='top'><p>Duplicate selection is not allowed.</p></div>"
				// dpc += "<div class='bot'><div class='b_box'>"
				// dpc += "<a href='#' class='c_btn md d_close'>확인</a>"
				// dpc += "</div></div></div></div>"	
				// $(".sat_frm").append(dpc)
			}
		}
	});
	//0726 tip 샘플코드 추가
	$(document).on('mouseenter','.lig',function (e) {
		var area = $("#str")
		var sWidth = area.width();
		var sHeight = area.height();
		console.log(sWidth)
		var oWidth = $('.tooltip').width();
		var oHeight = $('.tooltip').height();

		var divLeft = e.clientX ;
		var divTop = e.clientY - 160;

		if( divLeft + oWidth > sWidth ) divLeft -= oWidth;
		if( divTop + oHeight > sHeight ) divTop -= oHeight;

		if( divLeft < 0 ) divLeft = 0;
		if( divTop < 0 ) divTop = 0;
		$(this).children(".tooltip").css({
			"top": divTop,
			"left": divLeft,
		}).show();
	});
	$(document).on('mouseleave','.lig', function () {
		$(this).find(".tooltip").hide();
	});


	$(document).on('click', '.d_close', function(){
		$(this).parents(".c_confirm").remove();
	});

	function getSelection() {
		var seltxt = '';
		if (window.getSelection) { 
		seltxt = window.getSelection(); 
		} else if (document.getSelection) { 
		seltxt = document.getSelection(); 
		} else if (document.selection) { 
		seltxt = document.selection.createRange().text; 
		} else return;
		return seltxt;
	}
});

</script>
</head>
<body>
<div class="sat_top">
	<div class="title">
		<h2>Section 1, Module 1:Reading and Writing</h2>
		<a href="#" class="b_dir on">Directions</a>
	</div>
	<div class="time">
		<span class="val">30:25</span>
		<a href="javascript:void(0)" class="b_hide c_btn line sm">Hide</a>
	</div>
	<div class="b_box">
		<a href="#" class="b_annotate icc edit">Annotate</a>
		<a href="#" class="b_more">More</a>
	</div>
</div>
<div class="sat_frm">
	
	<!-- 시험지 iframe -->
	<div class="sat_con">
		<div class="section sec_01">
			<a href="#" class="b_size right"></a>
			<div class="sc">
				<p class="txt" id="str">In recommending Bao Phi's collection Song I Sing, a libararian noted that pieces by the spoKen-word poet don't lose their ____nature when printed: the language has the same pleasant musical quality on the page as it does when performed by Phi
					their ____nature when printed: the language has the same pleasant musical quality on the page as it does when performed by Phi
					their ____nature when () <b>the language has the same pleasant</b> musical quality on the page as it does when performed by Phi</p>
				<input id="selText" type="hidden">
			</div>
		</div>
		<div class="section sec_02">
			<a href="#" class="b_size left"></a>
			<div class="sc">
				<div class="top">
					<div class="num">1</div>
					<a href="#" class="b_mark">Mark for Review</a>
					<a href="#" class="b_check">check</a>
				</div>
				<div class="title">
					<p class="txt">Which choice completes the text with the most logical and precise word or phrase?</p>
				</div>
				<ul class="example">
					<li>
						<div>
							<span class="ap">A</span>
							<p class="txt">scholarlyscholarlyscholarlyscholarlyscholarlyscholarlyscholarlyscholarly</p>
						</div>
						<a href="#" class="undo">
							<span class="cir on">A</span>
						</a>
					</li>
					<li>
						<div>
							<span class="ap">B</span>
							<p class="txt">melodic</p>
						</div>
						<a href="#" class="undo">
							<span class="cir">B</span>
						</a>
					</li>
					<li>
						<div>
							<span class="ap">C</span>
							<p class="txt">melodic</p>
						</div>
						<a href="#" class="undo">
							<span class="cir">C</span>
						</a>
					</li>
					<li>
						<div>
							<span class="ap">D</span>
							<p class="txt">melodic</p>
						</div>
						<a href="#" class="undo">
							<span class="cir">D</span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- //시험지 iframe -->
</div>
<div class="sat_bot">
	<div class="name">Kyu Choi</div>
	<div class="answer">
		<a href="#" class="b_asw">Question 1 of 8</a>
		<div class="sheet">
			<div class="top">
				<div class="title">
					<h4>Section 1 : Reading and Writing Questions</h4>
					<p class="p_close">x</p>
				</div>
				<div class="icon_exam">
					<span class="cur">Current</span>
					<span class="una">Unanswered</span>
					<span class="for">For Review</span>
				</div>
			</div>
			<ul class="pr_li">
				<li class="on mark"><a href="#">1</a></li>
				<li class="mark"><a href="#">2</a></li>
				<li class="ch"><a href="#">3</a></li>
				<li><a href="#">4</a></li>
				<li><a href="#">5</a></li>
				<li><a href="#">6</a></li>
				<li><a href="#">7</a></li>
				<li><a href="#">8</a></li>
				<li><a href="#">9</a></li>
				<li><a href="#">10</a></li>
			</ul>
			<div class="b_box">
				<a href="#" class="c_btn blue_l line md">Go to Review Page</a>
			</div>
		</div>
	</div>
	<div class="b_box">
		<a href="#" class="c_btn">Next</a>
	</div>
</div>
<div class="dir" style="display: none;">
	<div class="con">
		<p>The questions in this section address a number of important reading and writing skills. Each question includes one or more passages, which may include a table or graph. Read each passage and question carefully, and then choose the best answer to the question based on the passage(s).</p>
		<div class="b_box"><a href="#" class="c_btn dir_close">Close</a></div>
	</div>
</div>
<div class="highlight">
	<div class="top">
		<div class="title">
			<h3>New Annotation:</h3>
			<p id="seltxt"></p>
		</div>
		<!-- 0726 close 문구 추가 -->
		<p class="p_close">CLOSE</p>
	</div>
	<div class="con">
		<div class="ibox">
			<div class="i_high"><span>Highlight Color:</span></div>
			<div class="i_under"><span>Underline style:</span></div>
		</div>
		<textarea></textarea>
		<div class="b_box">
			<a href="#" class="c_btn md">Save</a>
			<a href="#" class="c_btn md line blue_l">Cancel</a>
		</div>
	</div>
	
</div>

<div id="itemnav" class="c_dialog act" style="display:none;">
	<div class="mask bk"></div>
	<div class="outer">
		<div class="top">
			<p class="title">Item Navigation</p>
			<a href="#" class="p_close">x</a>
		</div>
		<div class="ct">
			<!-- 콘텐츠 -->
			<table class="item_li">
				<thead>
					<tr>
						<th class="current"></th>
						<th class="num">#</th>
						<th class="state"><a href="#" class="st_filter">State</a></th>
						<th class="mark"><a href="#" class="st_filter">Flagged</a></th>
						<th class="next">Item text</th>
					</tr>
					<tr class="hide nav_filter">
						<td></td>
						<td></td>
						<td colspan="3">
							<p class="desc">Show the following</p>
							<div class="btn_group">
								<button type="button" class="act_btn filter">Answered</button>
								<button type="button" class="act_btn filter active">Unanswered</button>
							</div>
							<div class="btn_group">
								<button type="button" class="act_btn filter">Flagged</button>
								<button type="button" class="act_btn filter">Unflagged</button>
							</div>
						</d>
					</tr>
				</thead>
				<tbody>
					<tr class="disabled">
						<td class="current"></td>
						<td class="num">Info</td>
						<td class="state">Answered</td>
						<td class="mark"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">Instr</td>
						<td class="state">Answered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">1</td>
						<td class="state">Answered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">2</td>
						<td class="state">Answered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr class="active"><!-- 현재 문항 -->
						<td class="current"><i class="icw_play"></i></td>
						<td class="num">3</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">4</td>
						<td class="state">Answered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">5</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">6</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">7</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">8</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">9</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">10</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">11</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">12</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">13</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">14</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
					<tr>
						<td class="current"></td>
						<td class="num">15</td>
						<td class="state">Unanswered</td>
						<td class="mark"><input type="checkbox"></td>
						<td class="next"></td>
					</tr>
				</tbody>
			</table>
			<!-- //콘텐츠 -->
		</div>
		<div class="foot">
			<button class="act_btn itemnav" type="button">Close</button>
		</div>
	</div>
</div>

</body>
</html>